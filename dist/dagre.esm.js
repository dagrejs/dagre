var fe=Object.defineProperty;var an=(e,n,t)=>n in e?fe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var dn=(e,n)=>{for(var t in n)fe(e,t,{get:n[t],enumerable:!0})};var be=(e,n,t)=>an(e,typeof n!="symbol"?n+"":n,t);var Y={};dn(Y,{default:()=>_n});var ln=Object.defineProperty,un=(e,n,t)=>n in e?ln(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,L=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),y=(e,n,t)=>un(e,typeof n!="symbol"?n+"":n,t),W=L((e,n)=>{"use strict";var t="\0",r="\0",o="",i=class{constructor(d){y(this,"_isDirected",!0),y(this,"_isMultigraph",!1),y(this,"_isCompound",!1),y(this,"_label"),y(this,"_defaultNodeLabelFn",()=>{}),y(this,"_defaultEdgeLabelFn",()=>{}),y(this,"_nodes",{}),y(this,"_in",{}),y(this,"_preds",{}),y(this,"_out",{}),y(this,"_sucs",{}),y(this,"_edgeObjs",{}),y(this,"_edgeLabels",{}),y(this,"_nodeCount",0),y(this,"_edgeCount",0),y(this,"_parent"),y(this,"_children"),d&&(this._isDirected=Object.hasOwn(d,"directed")?d.directed:!0,this._isMultigraph=Object.hasOwn(d,"multigraph")?d.multigraph:!1,this._isCompound=Object.hasOwn(d,"compound")?d.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[r]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(d){return this._label=d,this}graph(){return this._label}setDefaultNodeLabel(d){return this._defaultNodeLabelFn=d,typeof d!="function"&&(this._defaultNodeLabelFn=()=>d),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var d=this;return this.nodes().filter(h=>Object.keys(d._in[h]).length===0)}sinks(){var d=this;return this.nodes().filter(h=>Object.keys(d._out[h]).length===0)}setNodes(d,h){var f=arguments,p=this;return d.forEach(function(b){f.length>1?p.setNode(b,h):p.setNode(b)}),this}setNode(d,h){return Object.hasOwn(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=h),this):(this._nodes[d]=arguments.length>1?h:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)}node(d){return this._nodes[d]}hasNode(d){return Object.hasOwn(this._nodes,d)}removeNode(d){var h=this;if(Object.hasOwn(this._nodes,d)){var f=p=>h.removeEdge(h._edgeObjs[p]);delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],this.children(d).forEach(function(p){h.setParent(p)}),delete this._children[d]),Object.keys(this._in[d]).forEach(f),delete this._in[d],delete this._preds[d],Object.keys(this._out[d]).forEach(f),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this}setParent(d,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(h===void 0)h=r;else{h+="";for(var f=h;f!==void 0;f=this.parent(f))if(f===d)throw new Error("Setting "+h+" as parent of "+d+" would create a cycle");this.setNode(h)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=h,this._children[h][d]=!0,this}_removeFromParentsChildList(d){delete this._children[this._parent[d]][d]}parent(d){if(this._isCompound){var h=this._parent[d];if(h!==r)return h}}children(d=r){if(this._isCompound){var h=this._children[d];if(h)return Object.keys(h)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}}predecessors(d){var h=this._preds[d];if(h)return Object.keys(h)}successors(d){var h=this._sucs[d];if(h)return Object.keys(h)}neighbors(d){var h=this.predecessors(d);if(h){let p=new Set(h);for(var f of this.successors(d))p.add(f);return Array.from(p.values())}}isLeaf(d){var h;return this.isDirected()?h=this.successors(d):h=this.neighbors(d),h.length===0}filterNodes(d){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var f=this;Object.entries(this._nodes).forEach(function([g,m]){d(g)&&h.setNode(g,m)}),Object.values(this._edgeObjs).forEach(function(g){h.hasNode(g.v)&&h.hasNode(g.w)&&h.setEdge(g,f.edge(g))});var p={};function b(g){var m=f.parent(g);return m===void 0||h.hasNode(m)?(p[g]=m,m):m in p?p[m]:b(m)}return this._isCompound&&h.nodes().forEach(g=>h.setParent(g,b(g))),h}setDefaultEdgeLabel(d){return this._defaultEdgeLabelFn=d,typeof d!="function"&&(this._defaultEdgeLabelFn=()=>d),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(d,h){var f=this,p=arguments;return d.reduce(function(b,g){return p.length>1?f.setEdge(b,g,h):f.setEdge(b,g),g}),this}setEdge(){var d,h,f,p,b=!1,g=arguments[0];typeof g=="object"&&g!==null&&"v"in g?(d=g.v,h=g.w,f=g.name,arguments.length===2&&(p=arguments[1],b=!0)):(d=g,h=arguments[1],f=arguments[3],arguments.length>2&&(p=arguments[2],b=!0)),d=""+d,h=""+h,f!==void 0&&(f=""+f);var m=l(this._isDirected,d,h,f);if(Object.hasOwn(this._edgeLabels,m))return b&&(this._edgeLabels[m]=p),this;if(f!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(h),this._edgeLabels[m]=b?p:this._defaultEdgeLabelFn(d,h,f);var E=u(this._isDirected,d,h,f);return d=E.v,h=E.w,Object.freeze(E),this._edgeObjs[m]=E,s(this._preds[h],d),s(this._sucs[d],h),this._in[h][m]=E,this._out[d][m]=E,this._edgeCount++,this}edge(d,h,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f);return this._edgeLabels[p]}edgeAsObj(){let d=this.edge(...arguments);return typeof d!="object"?{label:d}:d}hasEdge(d,h,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f);return Object.hasOwn(this._edgeLabels,p)}removeEdge(d,h,f){var p=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f),b=this._edgeObjs[p];return b&&(d=b.v,h=b.w,delete this._edgeLabels[p],delete this._edgeObjs[p],a(this._preds[h],d),a(this._sucs[d],h),delete this._in[h][p],delete this._out[d][p],this._edgeCount--),this}inEdges(d,h){return this.isDirected()?this.filterEdges(this._in[d],d,h):this.nodeEdges(d,h)}outEdges(d,h){return this.isDirected()?this.filterEdges(this._out[d],d,h):this.nodeEdges(d,h)}nodeEdges(d,h){if(d in this._nodes)return this.filterEdges({...this._in[d],...this._out[d]},d,h)}filterEdges(d,h,f){if(d){var p=Object.values(d);return f?p.filter(function(b){return b.v===h&&b.w===f||b.v===f&&b.w===h}):p}}};function s(d,h){d[h]?d[h]++:d[h]=1}function a(d,h){--d[h]||delete d[h]}function l(d,h,f,p){var b=""+h,g=""+f;if(!d&&b>g){var m=b;b=g,g=m}return b+o+g+o+(p===void 0?t:p)}function u(d,h,f,p){var b=""+h,g=""+f;if(!d&&b>g){var m=b;b=g,g=m}var E={v:b,w:g};return p&&(E.name=p),E}function c(d,h){return l(d,h.v,h.w,h.name)}n.exports=i}),cn=L((e,n)=>{n.exports="3.0.4"}),hn=L((e,n)=>{n.exports={Graph:W(),version:cn()}}),fn=L((e,n)=>{var t=W();n.exports={write:r,read:s};function r(a){var l={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:o(a),edges:i(a)};return a.graph()!==void 0&&(l.value=structuredClone(a.graph())),l}function o(a){return a.nodes().map(function(l){var u=a.node(l),c=a.parent(l),d={v:l};return u!==void 0&&(d.value=u),c!==void 0&&(d.parent=c),d})}function i(a){return a.edges().map(function(l){var u=a.edge(l),c={v:l.v,w:l.w};return l.name!==void 0&&(c.name=l.name),u!==void 0&&(c.value=u),c})}function s(a){var l=new t(a.options).setGraph(a.value);return a.nodes.forEach(function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),a.edges.forEach(function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}}),pe=L((e,n)=>{n.exports=r;var t=()=>1;function r(i,s,a,l){return o(i,String(s),a||t,l||function(u){return i.outEdges(u)})}function o(i,s,a,l){var u={},c=!0,d=0,h=i.nodes(),f=function(m){var E=a(m);u[m.v].distance+E<u[m.w].distance&&(u[m.w]={distance:u[m.v].distance+E,predecessor:m.v},c=!0)},p=function(){h.forEach(function(m){l(m).forEach(function(E){var v=E.v===m?E.v:E.w,S=v===E.v?E.w:E.v;f({v,w:S})})})};h.forEach(function(m){var E=m===s?0:Number.POSITIVE_INFINITY;u[m]={distance:E}});for(var b=h.length,g=1;g<b&&(c=!1,d++,p(),!!c);g++);if(d===b-1&&(c=!1,p(),c))throw new Error("The graph contains a negative weight cycle");return u}}),bn=L((e,n)=>{n.exports=t;function t(r){var o={},i=[],s;function a(l){Object.hasOwn(o,l)||(o[l]=!0,s.push(l),r.successors(l).forEach(a),r.predecessors(l).forEach(a))}return r.nodes().forEach(function(l){s=[],a(l),s.length&&i.push(s)}),i}}),ge=L((e,n)=>{var t=class{constructor(){y(this,"_arr",[]),y(this,"_keyIndices",{})}size(){return this._arr.length}keys(){return this._arr.map(function(r){return r.key})}has(r){return Object.hasOwn(this._keyIndices,r)}priority(r){var o=this._keyIndices[r];if(o!==void 0)return this._arr[o].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(r,o){var i=this._keyIndices;if(r=String(r),!Object.hasOwn(i,r)){var s=this._arr,a=s.length;return i[r]=a,s.push({key:r,priority:o}),this._decrease(a),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key}decrease(r,o){var i=this._keyIndices[r];if(o>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+o);this._arr[i].priority=o,this._decrease(i)}_heapify(r){var o=this._arr,i=2*r,s=i+1,a=r;i<o.length&&(a=o[i].priority<o[a].priority?i:a,s<o.length&&(a=o[s].priority<o[a].priority?s:a),a!==r&&(this._swap(r,a),this._heapify(a)))}_decrease(r){for(var o=this._arr,i=o[r].priority,s;r!==0&&(s=r>>1,!(o[s].priority<i));)this._swap(r,s),r=s}_swap(r,o){var i=this._arr,s=this._keyIndices,a=i[r],l=i[o];i[r]=l,i[o]=a,s[l.key]=r,s[a.key]=o}};n.exports=t}),B=L((e,n)=>{var t=ge();n.exports=o;var r=()=>1;function o(s,a,l,u){var c=function(d){return s.outEdges(d)};return i(s,String(a),l||r,u||c)}function i(s,a,l,u){var c={},d=new t,h,f,p=function(b){var g=b.v!==h?b.v:b.w,m=c[g],E=l(b),v=f.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+E);v<m.distance&&(m.distance=v,m.predecessor=h,d.decrease(g,v))};for(s.nodes().forEach(function(b){var g=b===a?0:Number.POSITIVE_INFINITY;c[b]={distance:g},d.add(b,g)});d.size()>0&&(h=d.removeMin(),f=c[h],f.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(p);return c}}),pn=L((e,n)=>{var t=B();n.exports=r;function r(o,i,s){return o.nodes().reduce(function(a,l){return a[l]=t(o,l,i,s),a},{})}}),gn=L((e,n)=>{n.exports=t;function t(o,i,s){if(o[i].predecessor!==void 0)throw new Error("Invalid source vertex");if(o[s].predecessor===void 0&&s!==i)throw new Error("Invalid destination vertex");return{weight:o[s].distance,path:r(o,i,s)}}function r(o,i,s){for(var a=[],l=s;l!==i;)a.push(l),l=o[l].predecessor;return a.push(i),a.reverse()}}),me=L((e,n)=>{n.exports=t;function t(r){var o=0,i=[],s={},a=[];function l(u){var c=s[u]={onStack:!0,lowlink:o,index:o++};if(i.push(u),r.successors(u).forEach(function(f){Object.hasOwn(s,f)?s[f].onStack&&(c.lowlink=Math.min(c.lowlink,s[f].index)):(l(f),c.lowlink=Math.min(c.lowlink,s[f].lowlink))}),c.lowlink===c.index){var d=[],h;do h=i.pop(),s[h].onStack=!1,d.push(h);while(u!==h);a.push(d)}}return r.nodes().forEach(function(u){Object.hasOwn(s,u)||l(u)}),a}}),mn=L((e,n)=>{var t=me();n.exports=r;function r(o){return t(o).filter(function(i){return i.length>1||i.length===1&&o.hasEdge(i[0],i[0])})}}),En=L((e,n)=>{n.exports=r;var t=()=>1;function r(i,s,a){return o(i,s||t,a||function(l){return i.outEdges(l)})}function o(i,s,a){var l={},u=i.nodes();return u.forEach(function(c){l[c]={},l[c][c]={distance:0},u.forEach(function(d){c!==d&&(l[c][d]={distance:Number.POSITIVE_INFINITY})}),a(c).forEach(function(d){var h=d.v===c?d.w:d.v,f=s(d);l[c][h]={distance:f,predecessor:c}})}),u.forEach(function(c){var d=l[c];u.forEach(function(h){var f=l[h];u.forEach(function(p){var b=f[c],g=d[p],m=f[p],E=b.distance+g.distance;E<m.distance&&(m.distance=E,m.predecessor=g.predecessor)})})}),l}}),Ee=L((e,n)=>{function t(o){var i={},s={},a=[];function l(u){if(Object.hasOwn(s,u))throw new r;Object.hasOwn(i,u)||(s[u]=!0,i[u]=!0,o.predecessors(u).forEach(l),delete s[u],a.push(u))}if(o.sinks().forEach(l),Object.keys(i).length!==o.nodeCount())throw new r;return a}var r=class extends Error{constructor(){super(...arguments)}};n.exports=t,t.CycleException=r}),Ln=L((e,n)=>{var t=Ee();n.exports=r;function r(o){try{t(o)}catch(i){if(i instanceof t.CycleException)return!1;throw i}return!0}}),Le=L((e,n)=>{n.exports=t;function t(o,i,s,a,l){Array.isArray(i)||(i=[i]);var u=(o.isDirected()?o.successors:o.neighbors).bind(o),c={};return i.forEach(function(d){if(!o.hasNode(d))throw new Error("Graph does not have node: "+d);l=r(o,d,s==="post",c,u,a,l)}),l}function r(o,i,s,a,l,u,c){return Object.hasOwn(a,i)||(a[i]=!0,s||(c=u(c,i)),l(i).forEach(function(d){c=r(o,d,s,a,l,u,c)}),s&&(c=u(c,i))),c}}),ye=L((e,n)=>{var t=Le();n.exports=r;function r(o,i,s){return t(o,i,s,function(a,l){return a.push(l),a},[])}}),yn=L((e,n)=>{var t=ye();n.exports=r;function r(o,i){return t(o,i,"post")}}),wn=L((e,n)=>{var t=ye();n.exports=r;function r(o,i){return t(o,i,"pre")}}),vn=L((e,n)=>{var t=W(),r=ge();n.exports=o;function o(i,s){var a=new t,l={},u=new r,c;function d(f){var p=f.v===c?f.w:f.v,b=u.priority(p);if(b!==void 0){var g=s(f);g<b&&(l[p]=c,u.decrease(p,g))}}if(i.nodeCount()===0)return a;i.nodes().forEach(function(f){u.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),u.decrease(i.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),Object.hasOwn(l,c))a.setEdge(c,l[c]);else{if(h)throw new Error("Input graph is not connected: "+i);h=!0}i.nodeEdges(c).forEach(d)}return a}}),Nn=L((e,n)=>{var t=B(),r=pe();n.exports=o;function o(s,a,l,u){return i(s,a,l,u||function(c){return s.outEdges(c)})}function i(s,a,l,u){if(l===void 0)return t(s,a,l,u);for(var c=!1,d=s.nodes(),h=0;h<d.length;h++){for(var f=u(d[h]),p=0;p<f.length;p++){var b=f[p],g=b.v===d[h]?b.v:b.w,m=g===b.v?b.w:b.v;l({v:g,w:m})<0&&(c=!0)}if(c)return r(s,a,l,u)}return t(s,a,l,u)}}),Gn=L((e,n)=>{n.exports={bellmanFord:pe(),components:bn(),dijkstra:B(),dijkstraAll:pn(),extractPath:gn(),findCycles:mn(),floydWarshall:En(),isAcyclic:Ln(),postorder:yn(),preorder:wn(),prim:vn(),shortestPaths:Nn(),reduce:Le(),tarjan:me(),topsort:Ee()}}),kn=L((e,n)=>{var t=hn();n.exports={Graph:t.Graph,json:fn(),alg:Gn(),version:t.version}}),_n=kn();function N(e,n,t,r){let o=r;for(;e.hasNode(o);)o=R(r);return t.dummy=n,e.setNode(o,t),o}function ve(e){let n=new we().setGraph(e.graph());return e.nodes().forEach(t=>n.setNode(t,e.node(t))),e.edges().forEach(t=>{let r=n.edge(t.v,t.w)||{weight:0,minlen:1},o=e.edge(t);n.setEdge(t.v,t.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})}),n}function F(e){let n=new we({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(t=>{e.children(t).length||n.setNode(t,e.node(t))}),e.edges().forEach(t=>{n.setEdge(t,e.edge(t))}),n}function z(e,n){let t=e.x,r=e.y,o=n.x-t,i=n.y-r,s=e.width/2,a=e.height/2;if(!o&&!i)throw new Error("Not possible to find intersection inside of the rectangle");let l,u;return Math.abs(i)*s>Math.abs(o)*a?(i<0&&(a=-a),l=a*o/i,u=a):(o<0&&(s=-s),l=s,u=s*i/o),{x:t+l,y:r+u}}function G(e){let n=_(q(e)+1).map(()=>[]);return e.nodes().forEach(t=>{let r=e.node(t),o=r.rank;o!==void 0&&(n[o]||(n[o]=[]),n[o][r.order]=t)}),n}function Ne(e){let n=e.nodes().map(r=>{let o=e.node(r).rank;return o===void 0?Number.MAX_VALUE:o}),t=w(Math.min,n);e.nodes().forEach(r=>{let o=e.node(r);Object.hasOwn(o,"rank")&&(o.rank-=t)})}function Ge(e){let n=e.nodes().map(s=>e.node(s).rank).filter(s=>s!==void 0),t=w(Math.min,n),r=[];e.nodes().forEach(s=>{let a=e.node(s).rank-t;r[a]||(r[a]=[]),r[a].push(s)});let o=0,i=e.graph().nodeRankFactor;Array.from(r).forEach((s,a)=>{s===void 0&&a%i!==0?--o:s!==void 0&&o&&s.forEach(l=>e.node(l).rank+=o)})}function H(e,n,t,r){let o={width:0,height:0};return arguments.length>=4&&(o.rank=t,o.order=r),N(e,"border",o,n)}function xn(e,n=ke){let t=[];for(let r=0;r<e.length;r+=n){let o=e.slice(r,r+n);t.push(o)}return t}var ke=65535;function w(e,n){if(n.length>ke){let t=xn(n);return e(...t.map(r=>e(...r)))}else return e(...n)}function q(e){let t=e.nodes().map(r=>{let o=e.node(r).rank;return o===void 0?Number.MIN_VALUE:o});return w(Math.max,t)}function _e(e,n){let t={lhs:[],rhs:[]};return e.forEach(r=>{n(r)?t.lhs.push(r):t.rhs.push(r)}),t}function C(e,n){let t=Date.now();try{return n()}finally{console.log(e+" time: "+(Date.now()-t)+"ms")}}function P(e,n){return n()}var On=0;function R(e){let n=++On;return e+(""+n)}function _(e,n,t=1){n==null&&(n=e,e=0);let r=i=>i<n;t<0&&(r=i=>n<i);let o=[];for(let i=e;r(i);i+=t)o.push(i);return o}function I(e,n){let t={};for(let r of n)e[r]!==void 0&&(t[r]=e[r]);return t}function j(e,n){let t;return typeof n=="string"?t=r=>r[n]:t=n,Object.entries(e).reduce((r,[o,i])=>(r[o]=t(i,o),r),{})}function xe(e,n){return e.reduce((t,r,o)=>(t[r]=n[o],t),{})}var O="\0";var X="3.0.0-pre";var U=class{constructor(){be(this,"_sentinel");let n={};n._next=n._prev=n,this._sentinel=n}dequeue(){let n=this._sentinel,t=n._prev;if(t!==n)return Oe(t),t}enqueue(n){let t=this._sentinel;n._prev&&n._next&&Oe(n),n._next=t._next,t._next._prev=n,t._next=n,n._prev=t}toString(){let n=[],t=this._sentinel,r=t._prev;for(;r!==t;)n.push(JSON.stringify(r,Tn)),r=r._prev;return"["+n.join(", ")+"]"}};function Oe(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Tn(e,n){if(e!=="_next"&&e!=="_prev")return n}var Te=U;var jn=()=>1;function J(e,n){if(e.nodeCount()<=1)return[];let t=Pn(e,n||jn);return Cn(t.graph,t.buckets,t.zeroIdx).flatMap(o=>e.outEdges(o.v,o.w)||[])}function Cn(e,n,t){var a;let r=[],o=n[n.length-1],i=n[0],s;for(;e.nodeCount();){for(;s=i.dequeue();)K(e,n,t,s);for(;s=o.dequeue();)K(e,n,t,s);if(e.nodeCount()){for(let l=n.length-2;l>0;--l)if(s=(a=n[l])==null?void 0:a.dequeue(),s){r=r.concat(K(e,n,t,s,!0)||[]);break}}}return r}function K(e,n,t,r,o){let i=[],s=o?i:void 0;return(e.inEdges(r.v)||[]).forEach(a=>{let l=e.edge(a),u=e.node(a.v);o&&i.push({v:a.v,w:a.w}),u.out-=l,Q(n,t,u)}),(e.outEdges(r.v)||[]).forEach(a=>{let l=e.edge(a),u=a.w,c=e.node(u);c.in-=l,Q(n,t,c)}),e.removeNode(r.v),s}function Pn(e,n){let t=new In,r=0,o=0;e.nodes().forEach(a=>{t.setNode(a,{v:a,in:0,out:0})}),e.edges().forEach(a=>{let l=t.edge(a.v,a.w)||0,u=n(a),c=l+u;t.setEdge(a.v,a.w,c);let d=t.node(a.v),h=t.node(a.w);o=Math.max(o,d.out+=u),r=Math.max(r,h.in+=u)});let i=Rn(o+r+3).map(()=>new Te),s=r+1;return t.nodes().forEach(a=>{Q(i,s,t.node(a))}),{graph:t,buckets:i,zeroIdx:s}}function Q(e,n,t){var r,o,i;t.out?t.in?(i=e[t.out-t.in+n])==null||i.enqueue(t):(o=e[e.length-1])==null||o.enqueue(t):(r=e[0])==null||r.enqueue(t)}function Rn(e){let n=[];for(let t=0;t<e;t++)n.push(t);return n}function Ie(e){(e.graph().acyclicer==="greedy"?J(e,t(e)):Mn(e)).forEach(r=>{let o=e.edge(r);e.removeEdge(r),o.forwardName=r.name,o.reversed=!0,e.setEdge(r.w,r.v,o,R("rev"))});function t(r){return o=>r.edge(o).weight}}function Mn(e){let n=[],t={},r={};function o(i){Object.hasOwn(r,i)||(r[i]=!0,t[i]=!0,e.outEdges(i).forEach(s=>{Object.hasOwn(t,s.w)?n.push(s):o(s.w)}),delete t[i])}return e.nodes().forEach(o),n}function je(e){e.edges().forEach(n=>{let t=e.edge(n);if(t.reversed){e.removeEdge(n);let r=t.forwardName;delete t.reversed,delete t.forwardName,e.setEdge(n.w,n.v,t,r)}})}function Ce(e){e.graph().dummyChains=[],e.edges().forEach(n=>Fn(e,n))}function Fn(e,n){let t=n.v,r=e.node(t).rank,o=n.w,i=e.node(o).rank,s=n.name,a=e.edge(n),l=a.labelRank;if(i===r+1)return;e.removeEdge(n);let u,c,d;for(d=0,++r;r<i;++d,++r)a.points=[],c={width:0,height:0,edgeLabel:a,edgeObj:n,rank:r},u=N(e,"edge",c,"_d"),r===l&&(c.width=a.width,c.height=a.height,c.dummy="edge-label",c.labelpos=a.labelpos),e.setEdge(t,u,{weight:a.weight},s),d===0&&e.graph().dummyChains.push(u),t=u;e.setEdge(t,o,{weight:a.weight},s)}function Pe(e){e.graph().dummyChains.forEach(n=>{let t=e.node(n),r=t.edgeLabel,o;for(e.setEdge(t.edgeObj,r);t.dummy;)o=e.successors(n)[0],e.removeNode(n),r.points.push({x:t.x,y:t.y}),t.dummy==="edge-label"&&(r.x=t.x,r.y=t.y,r.width=t.width,r.height=t.height),n=o,t=e.node(n)})}function M(e){let n={};function t(r){let o=e.node(r);if(Object.hasOwn(n,r))return o.rank;n[r]=!0;let i=e.outEdges(r),s=i?i.map(l=>l==null?Number.POSITIVE_INFINITY:t(l.w)-e.edge(l).minlen):[],a=w(Math.min,s);return a===Number.POSITIVE_INFINITY&&(a=0),o.rank=a}e.sources().forEach(t)}function x(e,n){return e.node(n.w).rank-e.node(n.v).rank-e.edge(n).minlen}var D=Vn;function Vn(e){let n=new An({directed:!1}),t=e.nodes();if(t.length===0)throw new Error("Graph must have at least one node");let r=t[0],o=e.nodeCount();n.setNode(r,{});let i,s;for(;Wn(n,e)<o&&(i=Bn(n,e),!!i);)s=n.hasNode(i.v)?x(e,i):-x(e,i),Yn(n,e,s);return n}function Wn(e,n){function t(r){let o=n.nodeEdges(r);o&&o.forEach(i=>{let s=i.v,a=r===s?i.w:s;!e.hasNode(a)&&!x(n,i)&&(e.setNode(a,{}),e.setEdge(r,a,{}),t(a))})}return e.nodes().forEach(t),e.nodeCount()}function Bn(e,n){return n.edges().reduce((r,o)=>{let i=Number.POSITIVE_INFINITY;return e.hasNode(o.v)!==e.hasNode(o.w)&&(i=x(n,o)),i<r[0]?[i,o]:r},[Number.POSITIVE_INFINITY,null])[1]}function Yn(e,n,t){e.nodes().forEach(r=>n.node(r).rank+=t)}var{preorder:Hn,postorder:qn}=zn,Me=T;T.initLowLimValues=$;T.initCutValues=Z;T.calcCutValue=Se;T.leaveEdge=De;T.enterEdge=Ae;T.exchangeEdges=Ve;function T(e){e=ve(e),M(e);let n=D(e);$(n),Z(n,e);let t,r;for(;t=De(n);)r=Ae(n,e,t),Ve(n,e,t,r)}function Z(e,n){let t=qn(e,e.nodes());t=t.slice(0,t.length-1),t.forEach(r=>Xn(e,n,r))}function Xn(e,n,t){let o=e.node(t).parent,i=e.edge(t,o);i.cutvalue=Se(e,n,t)}function Se(e,n,t){let o=e.node(t).parent,i=!0,s=n.edge(t,o),a=0;s||(i=!1,s=n.edge(o,t)),a=s.weight;let l=n.nodeEdges(t);return l&&l.forEach(u=>{let c=u.v===t,d=c?u.w:u.v;if(d!==o){let h=c===i,f=n.edge(u).weight;if(a+=h?f:-f,Kn(e,t,d)){let b=e.edge(t,d).cutvalue;a+=h?-b:b}}}),a}function $(e,n){arguments.length<2&&(n=e.nodes()[0]),Fe(e,{},1,n)}function Fe(e,n,t,r,o){let i=t,s=e.node(r);n[r]=!0;let a=e.neighbors(r);return a&&a.forEach(l=>{Object.hasOwn(n,l)||(t=Fe(e,n,t,l,r))}),s.low=i,s.lim=t++,o?s.parent=o:delete s.parent,t}function De(e){return e.edges().find(n=>e.edge(n).cutvalue<0)}function Ae(e,n,t){let r=t.v,o=t.w;n.hasEdge(r,o)||(r=t.w,o=t.v);let i=e.node(r),s=e.node(o),a=i,l=!1;return i.lim>s.lim&&(a=s,l=!0),n.edges().filter(c=>l===Re(e,e.node(c.v),a)&&l!==Re(e,e.node(c.w),a)).reduce((c,d)=>x(n,d)<x(n,c)?d:c)}function Ve(e,n,t,r){let o=t.v,i=t.w;e.removeEdge(o,i),e.setEdge(r.v,r.w,{}),$(e),Z(e,n),Un(e,n)}function Un(e,n){let t=e.nodes().find(o=>!e.node(o).parent);if(!t)return;let r=Hn(e,[t]);r=r.slice(1),r.forEach(o=>{let s=e.node(o).parent,a=n.edge(o,s),l=!1;a||(a=n.edge(s,o),l=!0),n.node(o).rank=n.node(s).rank+(l?a.minlen:-a.minlen)})}function Kn(e,n,t){return e.hasEdge(n,t)}function Re(e,n,t){return t.low<=n.lim&&n.lim<=t.lim}var Be=Qn;function Qn(e){let n=e.graph().ranker;if(typeof n=="function")return n(e);switch(n){case"network-simplex":We(e);break;case"tight-tree":Zn(e);break;case"longest-path":Jn(e);break;case"none":break;default:We(e)}}var Jn=M;function Zn(e){M(e),D(e)}function We(e){Me(e)}var Ye=$n;function $n(e){let n=nt(e);e.graph().dummyChains.forEach(t=>{let r=e.node(t),o=r.edgeObj,i=et(e,n,o.v,o.w),s=i.path,a=i.lca,l=0,u=s[l],c=!0;for(;t!==o.w;){if(r=e.node(t),c){for(;(u=s[l])!==a&&e.node(u).maxRank<r.rank;)l++;u===a&&(c=!1)}if(!c){for(;l<s.length-1&&e.node(s[l+1]).minRank<=r.rank;)l++;u=s[l]}u!==void 0&&e.setParent(t,u),t=e.successors(t)[0]}})}function et(e,n,t,r){let o=[],i=[],s=Math.min(n[t].low,n[r].low),a=Math.max(n[t].lim,n[r].lim),l;l=t;do l=e.parent(l),o.push(l);while(l&&(n[l].low>s||a>n[l].lim));let u=l,c=r;for(;(c=e.parent(c))!==u;)i.push(c);return{path:o.concat(i.reverse()),lca:u}}function nt(e){let n={},t=0;function r(o){let i=t;e.children(o).forEach(r),n[o]={low:i,lim:t++}}return e.children(O).forEach(r),n}function ze(e){let n=N(e,"root",{},"_root"),t=tt(e),r=Object.values(t),o=w(Math.max,r)-1,i=2*o+1;e.graph().nestingRoot=n,e.edges().forEach(a=>e.edge(a).minlen*=i);let s=rt(e)+1;e.children(O).forEach(a=>He(e,n,i,s,o,t,a)),e.graph().nodeRankFactor=i}function He(e,n,t,r,o,i,s){var d;let a=e.children(s);if(!a.length){s!==n&&e.setEdge(n,s,{weight:0,minlen:t});return}let l=H(e,"_bt"),u=H(e,"_bb"),c=e.node(s);e.setParent(l,s),c.borderTop=l,e.setParent(u,s),c.borderBottom=u,a.forEach(h=>{var E;He(e,n,t,r,o,i,h);let f=e.node(h),p=f.borderTop?f.borderTop:h,b=f.borderBottom?f.borderBottom:h,g=f.borderTop?r:2*r,m=p!==b?1:o-((E=i[s])!=null?E:0)+1;e.setEdge(l,p,{weight:g,minlen:m,nestingEdge:!0}),e.setEdge(b,u,{weight:g,minlen:m,nestingEdge:!0})}),e.parent(s)||e.setEdge(n,l,{weight:0,minlen:o+((d=i[s])!=null?d:0)})}function tt(e){let n={};function t(r,o){let i=e.children(r);i&&i.length&&i.forEach(s=>t(s,o+1)),n[r]=o}return e.children(O).forEach(r=>t(r,1)),n}function rt(e){return e.edges().reduce((n,t)=>n+e.edge(t).weight,0)}function qe(e){let n=e.graph();e.removeNode(n.nestingRoot),delete n.nestingRoot,e.edges().forEach(t=>{e.edge(t).nestingEdge&&e.removeEdge(t)})}var Ue=it;function it(e){function n(t){let r=e.children(t),o=e.node(t);if(r.length&&r.forEach(n),Object.hasOwn(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(let i=o.minRank,s=o.maxRank+1;i<s;++i)Xe(e,"borderLeft","_bl",t,o,i),Xe(e,"borderRight","_br",t,o,i)}}e.children(O).forEach(n)}function Xe(e,n,t,r,o,i){let s={width:0,height:0,rank:i,borderType:n},a=o[n][i-1],l=N(e,"border",s,t);o[n][i]=l,e.setParent(l,r),a&&e.setEdge(a,l,{weight:1})}function Qe(e){var t;let n=(t=e.graph().rankdir)==null?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Ze(e)}function Je(e){var t;let n=(t=e.graph().rankdir)==null?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&st(e),(n==="lr"||n==="rl")&&(at(e),Ze(e))}function Ze(e){e.nodes().forEach(n=>Ke(e.node(n))),e.edges().forEach(n=>Ke(e.edge(n)))}function Ke(e){let n=e.width;e.width=e.height,e.height=n}function st(e){e.nodes().forEach(n=>ee(e.node(n))),e.edges().forEach(n=>{var r;let t=e.edge(n);(r=t.points)==null||r.forEach(ee),Object.hasOwn(t,"y")&&ee(t)})}function ee(e){e.y=-e.y}function at(e){e.nodes().forEach(n=>ne(e.node(n))),e.edges().forEach(n=>{var r;let t=e.edge(n);(r=t.points)==null||r.forEach(ne),Object.hasOwn(t,"x")&&ne(t)})}function ne(e){let n=e.x;e.x=e.y,e.y=n}function te(e){let n={},t=e.nodes().filter(l=>!e.children(l).length),r=t.map(l=>e.node(l).rank),o=w(Math.max,r),i=_(o+1).map(()=>[]);function s(l){if(n[l])return;n[l]=!0;let u=e.node(l);i[u.rank].push(l);let c=e.successors(l);c&&c.forEach(s)}return t.sort((l,u)=>e.node(l).rank-e.node(u).rank).forEach(s),i}function re(e,n){let t=0;for(let r=1;r<n.length;++r)t+=lt(e,n[r-1],n[r]);return t}function lt(e,n,t){let r=xe(t,t.map((u,c)=>c)),o=n.flatMap(u=>{let c=e.outEdges(u);return c?c.map(d=>({pos:r[d.w],weight:e.edge(d).weight})).sort((d,h)=>d.pos-h.pos):[]}),i=1;for(;i<t.length;)i<<=1;let s=2*i-1;i-=1;let a=new Array(s).fill(0),l=0;return o.forEach(u=>{let c=u.pos+i;a[c]+=u.weight;let d=0;for(;c>0;)c%2&&(d+=a[c+1]),c=c-1>>1,a[c]+=u.weight;l+=u.weight*d}),l}function oe(e,n=[]){return n.map(t=>{let r=e.inEdges(t);if(!r||!r.length)return{v:t};{let o=r.reduce((i,s)=>{let a=e.edge(s),l=e.node(s.v);return{sum:i.sum+a.weight*l.order,weight:i.weight+a.weight}},{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}})}function ie(e,n){let t={};e.forEach((o,i)=>{let s={indegree:0,in:[],out:[],vs:[o.v],i};o.barycenter!==void 0&&(s.barycenter=o.barycenter,s.weight=o.weight),t[o.v]=s}),n.edges().forEach(o=>{let i=t[o.v],s=t[o.w];i!==void 0&&s!==void 0&&(s.indegree++,i.out.push(s))});let r=Object.values(t).filter(o=>!o.indegree);return ut(r)}function ut(e){let n=[];function t(o){return i=>{i.merged||(i.barycenter===void 0||o.barycenter===void 0||i.barycenter>=o.barycenter)&&ct(o,i)}}function r(o){return i=>{i.in.push(o),--i.indegree===0&&e.push(i)}}for(;e.length;){let o=e.pop();n.push(o),o.in.reverse().forEach(t(o)),o.out.forEach(r(o))}return n.filter(o=>!o.merged).map(o=>I(o,["vs","i","barycenter","weight"]))}function ct(e,n){let t=0,r=0;e.weight&&(t+=e.barycenter*e.weight,r+=e.weight),n.weight&&(t+=n.barycenter*n.weight,r+=n.weight),e.vs=n.vs.concat(e.vs),e.barycenter=t/r,e.weight=r,e.i=Math.min(n.i,e.i),n.merged=!0}function se(e,n){let t=_e(e,c=>Object.hasOwn(c,"barycenter")),r=t.lhs,o=t.rhs.sort((c,d)=>d.i-c.i),i=[],s=0,a=0,l=0;r.sort(ht(!!n)),l=$e(i,o,l),r.forEach(c=>{l+=c.vs.length,i.push(c.vs),s+=c.barycenter*c.weight,a+=c.weight,l=$e(i,o,l)});let u={vs:i.flat(1)};return a&&(u.barycenter=s/a,u.weight=a),u}function $e(e,n,t){let r;for(;n.length&&(r=n[n.length-1]).i<=t;)n.pop(),e.push(r.vs),t++;return t}function ht(e){return(n,t)=>n.barycenter<t.barycenter?-1:n.barycenter>t.barycenter?1:e?t.i-n.i:n.i-t.i}function A(e,n,t,r){let o=e.children(n),i=e.node(n),s=i?i.borderLeft:void 0,a=i?i.borderRight:void 0,l={};s&&(o=o.filter(h=>h!==s&&h!==a));let u=oe(e,o);u.forEach(h=>{if(e.children(h.v).length){let f=A(e,h.v,t,r);l[h.v]=f,Object.hasOwn(f,"barycenter")&&bt(h,f)}});let c=ie(u,t);ft(c,l);let d=se(c,r);if(s&&a){d.vs=[s,d.vs,a].flat(1);let h=e.predecessors(s);if(h&&h.length){let f=e.node(h[0]),p=e.predecessors(a),b=e.node(p[0]);Object.hasOwn(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+b.order)/(d.weight+2),d.weight+=2}}return d}function ft(e,n){e.forEach(t=>{t.vs=t.vs.flatMap(r=>n[r]?n[r].vs:r)})}function bt(e,n){e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+n.barycenter*n.weight)/(e.weight+n.weight),e.weight+=n.weight):(e.barycenter=n.barycenter,e.weight=n.weight)}function ae(e,n,t,r){r||(r=e.nodes());let o=gt(e),i=new pt({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return r.forEach(s=>{let a=e.node(s),l=e.parent(s);if(a.rank===n||a.minRank<=n&&n<=a.maxRank){i.setNode(s),i.setParent(s,l||o);let u=e[t](s);u&&u.forEach(c=>{let d=c.v===s?c.w:c.v,h=i.edge(d,s),f=h!==void 0?h.weight:0;i.setEdge(d,s,{weight:e.edge(c).weight+f})}),Object.hasOwn(a,"minRank")&&i.setNode(s,{borderLeft:a.borderLeft[n],borderRight:a.borderRight[n]})}}),i}function gt(e){let n;for(;e.hasNode(n=R("_root")););return n}function de(e,n,t){let r={},o;t.forEach(i=>{let s=e.parent(i),a,l;for(;s;){if(a=e.parent(s),a?(l=r[a],r[a]=s):(l=o,o=s),l&&l!==s){n.setEdge(l,s);return}s=a}})}function V(e,n={}){if(typeof n.customOrder=="function"){n.customOrder(e,V);return}let t=q(e),r=en(e,_(1,t+1),"inEdges"),o=en(e,_(t-1,-1,-1),"outEdges"),i=te(e);if(nn(e,i),n.disableOptimalOrderHeuristic)return;let s=Number.POSITIVE_INFINITY,a,l=n.constraints||[];for(let u=0,c=0;c<4;++u,++c){Et(u%2?r:o,u%4>=2,l),i=G(e);let d=re(e,i);d<s?(c=0,a=Object.assign({},i),s=d):d===s&&(a=structuredClone(i))}nn(e,a)}function en(e,n,t){let r=new Map,o=(i,s)=>{r.has(i)||r.set(i,[]),r.get(i).push(s)};for(let i of e.nodes()){let s=e.node(i);if(typeof s.rank=="number"&&o(s.rank,i),typeof s.minRank=="number"&&typeof s.maxRank=="number")for(let a=s.minRank;a<=s.maxRank;a++)a!==s.rank&&o(a,i)}return n.map(function(i){return ae(e,i,t,r.get(i)||[])})}function Et(e,n,t){let r=new mt;e.forEach(function(o){t.forEach(a=>r.setEdge(a.left,a.right));let i=o.graph().root,s=A(o,i,r,n);s.vs.forEach((a,l)=>o.node(a).order=l),de(o,r,s.vs)})}function nn(e,n){Object.values(n).forEach(t=>t.forEach((r,o)=>e.node(r).order=o))}function yt(e,n){let t={};function r(o,i){let s=0,a=0,l=o.length,u=i[i.length-1];return i.forEach((c,d)=>{let h=vt(e,c),f=h?e.node(h).order:l;(h||c===u)&&(i.slice(a,d+1).forEach(p=>{let b=e.predecessors(p);b&&b.forEach(g=>{let m=e.node(g),E=m.order;(E<s||f<E)&&!(m.dummy&&e.node(p).dummy)&&tn(t,g,p)})}),a=d+1,s=f)}),i}return n.length&&n.reduce(r),t}function wt(e,n){let t={};function r(i,s,a,l,u){_(s,a).forEach(c=>{let d=i[c];if(d!==void 0&&e.node(d).dummy){let h=e.predecessors(d);h&&h.forEach(f=>{if(f===void 0)return;let p=e.node(f);p.dummy&&(p.order<l||p.order>u)&&tn(t,f,d)})}})}function o(i,s){let a=-1,l=-1,u=0;return s.forEach((c,d)=>{if(e.node(c).dummy==="border"){let h=e.predecessors(c);if(h&&h.length){let f=h[0];if(f===void 0)return;l=e.node(f).order,r(s,u,d,a,l),u=d,a=l}}r(s,u,s.length,l,i.length)}),s}return n.length&&n.reduce(o),t}function vt(e,n){if(e.node(n).dummy){let t=e.predecessors(n);if(t)return t.find(r=>e.node(r).dummy)}}function tn(e,n,t){if(n>t){let o=n;n=t,t=o}let r=e[n];r||(e[n]=r={}),r[t]=!0}function Nt(e,n,t){if(n>t){let o=n;n=t,t=o}let r=e[n];return r!==void 0&&Object.hasOwn(r,t)}function Gt(e,n,t,r){let o={},i={},s={};return n.forEach(a=>{a.forEach((l,u)=>{o[l]=l,i[l]=l,s[l]=u})}),n.forEach(a=>{let l=-1;a.forEach(u=>{let c=r(u);if(c&&c.length){let d=c.sort((f,p)=>{let b=s[f],g=s[p];return(b!==void 0?b:0)-(g!==void 0?g:0)}),h=(d.length-1)/2;for(let f=Math.floor(h),p=Math.ceil(h);f<=p;++f){let b=d[f];if(b===void 0)continue;let g=s[b];if(g!==void 0&&i[u]===u&&l<g&&!Nt(t,u,b)){let m=o[b];m!==void 0&&(i[b]=u,i[u]=o[u]=m,l=g)}}}})}),{root:o,align:i}}function kt(e,n,t,r,o=!1){let i={},s=_t(e,n,t,o),a=o?"borderLeft":"borderRight";function l(f,p){let b=s.nodes().slice(),g={},m=b.pop();for(;m;){if(g[m])f(m);else{g[m]=!0,b.push(m);for(let E of p(m))b.push(E)}m=b.pop()}}function u(f){let p=s.inEdges(f);p?i[f]=p.reduce((b,g)=>{var v;let m=(v=i[g.v])!=null?v:0,E=s.edge(g);return Math.max(b,m+(E!==void 0?E:0))},0):i[f]=0}function c(f){let p=s.outEdges(f),b=Number.POSITIVE_INFINITY;p&&(b=p.reduce((m,E)=>{let v=i[E.w],S=s.edge(E);return Math.min(m,(v!==void 0?v:0)-(S!==void 0?S:0))},Number.POSITIVE_INFINITY));let g=e.node(f);b!==Number.POSITIVE_INFINITY&&g.borderType!==a&&(i[f]=Math.max(i[f]!==void 0?i[f]:0,b))}function d(f){return s.predecessors(f)||[]}function h(f){return s.successors(f)||[]}return l(u,d),l(c,h),Object.keys(r).forEach(f=>{var b;let p=t[f];p!==void 0&&(i[f]=(b=i[p])!=null?b:0)}),i}function _t(e,n,t,r){let o=new Lt,i=e.graph(),s=It(i.nodesep,i.edgesep,r);return n.forEach(a=>{let l;a.forEach(u=>{let c=t[u];if(c!==void 0){if(o.setNode(c),l!==void 0){let d=t[l];if(d!==void 0){let h=o.edge(d,c);o.setEdge(d,c,Math.max(s(e,u,l),h||0))}}l=u}})}),o}function xt(e,n){return Object.values(n).reduce((t,r)=>{let o=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;Object.entries(r).forEach(([a,l])=>{let u=jt(e,a)/2;o=Math.max(l+u,o),i=Math.min(l-u,i)});let s=o-i;return s<t[0]&&(t=[s,r]),t},[Number.POSITIVE_INFINITY,null])[1]}function Ot(e,n){let t=Object.values(n),r=w(Math.min,t),o=w(Math.max,t);["u","d"].forEach(i=>{["l","r"].forEach(s=>{let a=i+s,l=e[a];if(!l||l===n)return;let u=Object.values(l),c=r-w(Math.min,u);s!=="l"&&(c=o-w(Math.max,u)),c&&(e[a]=j(l,d=>d+c))})})}function Tt(e,n=void 0){let t=e.ul;return t?j(t,(r,o)=>{var s,a;if(n){let l=n.toLowerCase(),u=e[l];if(u&&u[o]!==void 0)return u[o]}let i=Object.values(e).map(l=>{let u=l[o];return u!==void 0?u:0}).sort((l,u)=>l-u);return(((s=i[1])!=null?s:0)+((a=i[2])!=null?a:0))/2}):{}}function rn(e){let n=G(e),t=Object.assign(yt(e,n),wt(e,n)),r={},o;["u","d"].forEach(s=>{o=s==="u"?n:Object.values(n).reverse(),["l","r"].forEach(a=>{a==="r"&&(o=o.map(d=>Object.values(d).reverse()));let u=Gt(e,o,t,d=>(s==="u"?e.predecessors(d):e.successors(d))||[]),c=kt(e,o,u.root,u.align,a==="r");a==="r"&&(c=j(c,d=>-d)),r[s+a]=c})});let i=xt(e,r);return Ot(r,i),Tt(r,e.graph().align)}function It(e,n,t){return(r,o,i)=>{let s=r.node(o),a=r.node(i),l=0,u;if(l+=s.width/2,Object.hasOwn(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2;break}if(u&&(l+=t?u:-u),u=void 0,l+=(s.dummy?n:e)/2,l+=(a.dummy?n:e)/2,l+=a.width/2,Object.hasOwn(a,"labelpos"))switch(a.labelpos.toLowerCase()){case"l":u=a.width/2;break;case"r":u=-a.width/2;break}return u&&(l+=t?u:-u),l}}function jt(e,n){return e.node(n).width}function on(e){e=F(e),Ct(e),Object.entries(rn(e)).forEach(([n,t])=>e.node(n).x=t)}function Ct(e){let n=G(e),t=e.graph(),r=t.ranksep,o=t.rankalign,i=0;n.forEach(s=>{let a=s.reduce((l,u)=>{var d;let c=(d=e.node(u).height)!=null?d:0;return l>c?l:c},0);s.forEach(l=>{let u=e.node(l);o==="top"?u.y=i+u.height/2:o==="bottom"?u.y=i+a-u.height/2:u.y=i+a/2}),i+=a+r})}function ce(e,n={}){let t=n.debugTiming?C:P;return t("layout",()=>{let r=t("  buildLayoutGraph",()=>Yt(e));return t("  runLayout",()=>Rt(r,t,n)),t("  updateInputGraph",()=>Mt(e,r)),r})}function Rt(e,n,t){n("    makeSpaceForEdgeLabels",()=>zt(e)),n("    removeSelfEdges",()=>$t(e)),n("    acyclic",()=>Ie(e)),n("    nestingGraph.run",()=>ze(e)),n("    rank",()=>Be(F(e))),n("    injectEdgeLabelProxies",()=>Ht(e)),n("    removeEmptyRanks",()=>Ge(e)),n("    nestingGraph.cleanup",()=>qe(e)),n("    normalizeRanks",()=>Ne(e)),n("    assignRankMinMax",()=>qt(e)),n("    removeEdgeLabelProxies",()=>Xt(e)),n("    normalize.run",()=>Ce(e)),n("    parentDummyChains",()=>Ye(e)),n("    addBorderSegments",()=>Ue(e)),n("    order",()=>V(e,t)),n("    insertSelfEdges",()=>er(e)),n("    adjustCoordinateSystem",()=>Qe(e)),n("    position",()=>on(e)),n("    positionSelfEdges",()=>nr(e)),n("    removeBorderNodes",()=>Zt(e)),n("    normalize.undo",()=>Pe(e)),n("    fixupEdgeLabelCoords",()=>Qt(e)),n("    undoCoordinateSystem",()=>Je(e)),n("    translateGraph",()=>Ut(e)),n("    assignNodeIntersects",()=>Kt(e)),n("    reversePoints",()=>Jt(e)),n("    acyclic.undo",()=>je(e))}function Mt(e,n){e.nodes().forEach(t=>{let r=e.node(t),o=n.node(t);r&&(r.x=o.x,r.y=o.y,r.order=o.order,r.rank=o.rank,n.children(t).length&&(r.width=o.width,r.height=o.height))}),e.edges().forEach(t=>{let r=e.edge(t),o=n.edge(t);r.points=o.points,Object.hasOwn(o,"x")&&(r.x=o.x,r.y=o.y)}),e.graph().width=n.graph().width,e.graph().height=n.graph().height}var St=["nodesep","edgesep","ranksep","marginx","marginy"],Ft={ranksep:50,edgesep:20,nodesep:50,rankdir:"TB",rankalign:"center"},Dt=["acyclicer","ranker","rankdir","align","rankalign"],At=["width","height","rank"],sn={width:0,height:0},Vt=["minlen","weight","width","height","labeloffset"],Wt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Bt=["labelpos"];function Yt(e){let n=new Pt({multigraph:!0,compound:!0}),t=ue(e.graph());return n.setGraph(Object.assign({},Ft,le(t,St),I(t,Dt))),e.nodes().forEach(r=>{let o=ue(e.node(r)),i=le(o,At);Object.keys(sn).forEach(a=>{i[a]===void 0&&(i[a]=sn[a])}),n.setNode(r,i);let s=e.parent(r);s!==void 0&&n.setParent(r,s)}),e.edges().forEach(r=>{let o=ue(e.edge(r));n.setEdge(r,Object.assign({},Wt,le(o,Vt),I(o,Bt)))}),n}function zt(e){let n=e.graph();n.ranksep/=2,e.edges().forEach(t=>{let r=e.edge(t);r.minlen*=2,r.labelpos.toLowerCase()!=="c"&&(n.rankdir==="TB"||n.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})}function Ht(e){e.edges().forEach(n=>{let t=e.edge(n);if(t.width&&t.height){let r=e.node(n.v),i={rank:(e.node(n.w).rank-r.rank)/2+r.rank,e:n};N(e,"edge-proxy",i,"_ep")}})}function qt(e){let n=0;e.nodes().forEach(t=>{let r=e.node(t);r.borderTop&&(r.minRank=e.node(r.borderTop).rank,r.maxRank=e.node(r.borderBottom).rank,n=Math.max(n,r.maxRank))}),e.graph().maxRank=n}function Xt(e){e.nodes().forEach(n=>{let t=e.node(n);if(t.dummy==="edge-proxy"){let r=t;e.edge(r.e).labelRank=t.rank,e.removeNode(n)}})}function Ut(e){let n=Number.POSITIVE_INFINITY,t=0,r=Number.POSITIVE_INFINITY,o=0,i=e.graph(),s=i.marginx||0,a=i.marginy||0;function l(u){let c=u.x,d=u.y,h=u.width,f=u.height;n=Math.min(n,c-h/2),t=Math.max(t,c+h/2),r=Math.min(r,d-f/2),o=Math.max(o,d+f/2)}e.nodes().forEach(u=>l(e.node(u))),e.edges().forEach(u=>{let c=e.edge(u);Object.hasOwn(c,"x")&&l(c)}),n-=s,r-=a,e.nodes().forEach(u=>{let c=e.node(u);c.x-=n,c.y-=r}),e.edges().forEach(u=>{let c=e.edge(u);c.points.forEach(d=>{d.x-=n,d.y-=r}),Object.hasOwn(c,"x")&&(c.x-=n),Object.hasOwn(c,"y")&&(c.y-=r)}),i.width=t-n+s,i.height=o-r+a}function Kt(e){e.edges().forEach(n=>{let t=e.edge(n),r=e.node(n.v),o=e.node(n.w),i,s;t.points?(i=t.points[0],s=t.points[t.points.length-1]):(t.points=[],i=o,s=r),t.points.unshift(z(r,i)),t.points.push(z(o,s))})}function Qt(e){e.edges().forEach(n=>{let t=e.edge(n);if(Object.hasOwn(t,"x"))switch((t.labelpos==="l"||t.labelpos==="r")&&(t.width-=t.labeloffset),t.labelpos){case"l":t.x-=t.width/2+t.labeloffset;break;case"r":t.x+=t.width/2+t.labeloffset;break}})}function Jt(e){e.edges().forEach(n=>{let t=e.edge(n);t.reversed&&t.points.reverse()})}function Zt(e){e.nodes().forEach(n=>{if(e.children(n).length){let t=e.node(n),r=e.node(t.borderTop),o=e.node(t.borderBottom),i=e.node(t.borderLeft[t.borderLeft.length-1]),s=e.node(t.borderRight[t.borderRight.length-1]);t.width=Math.abs(s.x-i.x),t.height=Math.abs(o.y-r.y),t.x=i.x+t.width/2,t.y=r.y+t.height/2}}),e.nodes().forEach(n=>{e.node(n).dummy==="border"&&e.removeNode(n)})}function $t(e){e.edges().forEach(n=>{if(n.v===n.w){let t=e.node(n.v);t.selfEdges||(t.selfEdges=[]),t.selfEdges.push({e:n,label:e.edge(n)}),e.removeEdge(n)}})}function er(e){G(e).forEach(t=>{let r=0;t.forEach((o,i)=>{let s=e.node(o);s.order=i+r,(s.selfEdges||[]).forEach(a=>{N(e,"selfedge",{width:a.label.width,height:a.label.height,rank:s.rank,order:i+ ++r,e:a.e,label:a.label},"_se")}),delete s.selfEdges})})}function nr(e){e.nodes().forEach(n=>{let t=e.node(n);if(t.dummy==="selfedge"){let r=t,o=e.node(r.e.v),i=o.x+o.width/2,s=o.y,a=t.x-i,l=o.height/2;e.setEdge(r.e,r.label),e.removeNode(n),r.label.points=[{x:i+2*a/3,y:s-l},{x:i+5*a/6,y:s-l},{x:i+a,y:s},{x:i+5*a/6,y:s+l},{x:i+2*a/3,y:s+l}],r.label.x=t.x,r.label.y=t.y}})}function le(e,n){return j(I(e,n),Number)}function ue(e){let n={};return e&&Object.entries(e).forEach(([t,r])=>{typeof t=="string"&&(t=t.toLowerCase()),n[t]=r}),n}function he(e){let n=G(e),t=new tr({compound:!0,multigraph:!0}).setGraph({});return e.nodes().forEach(r=>{t.setNode(r,{label:r}),t.setParent(r,"layer"+e.node(r).rank)}),e.edges().forEach(r=>t.setEdge(r.v,r.w,{},r.name)),n.forEach((r,o)=>{let i="layer"+o;t.setNode(i,{rank:"same"}),r.reduce((s,a)=>(t.setEdge(s,a,{style:"invis"}),a))}),t}var ko={time:C,notime:P},rr={graphlib:Y,version:X,layout:ce,debug:he,util:{time:C,notime:P}},_o=rr;export{he as debug,_o as default,Y as graphlib,ce as layout,ko as util,X as version};
/*! For license information please see dagre.esm.js.LEGAL.txt */
//# sourceMappingURL=dagre.esm.js.map
